"0","# Spread scenarios to be able to change them"
"0","energy_cons_abs <- spread(energy_cons_filter, key = ""Scenario"", value = ""Value"")"
"0","# Transform each scenario into the relative difference to reference scenario"
"0","energy_cons_abs <- energy_cons_abs %>% mutate(bau = (bau-ref))"
"0","energy_cons_abs <- energy_cons_abs %>% mutate(cAP = (cAP-ref))"
"0","energy_cons_abs <- energy_cons_abs %>% mutate(inv = (inv-ref))"
"0","energy_cons_abs <- energy_cons_abs %>% mutate(lab = (lab-ref))"
"0","energy_cons_abs <- energy_cons_abs %>% mutate(vat = (vat-ref))"
"0","# drop ref"
"0","energy_cons_abs <- subset(energy_cons_abs, select = -c(ref))"
"0","# gather scenarios"
"0","energy_cons_abs <- gather(energy_cons_abs, 'bau', 'cAP', 'inv', 'vat', 'lab', key = 'Scenario', value = 'Value')"
"0","energy_cons_abs <- energy_cons_abs %>%"
"0","  mutate(Scenario = str_replace(Scenario, ""vat"", ""con""))"
"0","energy_cons_abs$Region <- gsub(""DEU"",""Germany"", energy_cons_abs$Region)"
"0","energy_cons_abs$Region <- gsub(""FRA"",""France"", energy_cons_abs$Region)"
"0","energy_cons_abs$Region <- gsub(""ITA"",""Italy"", energy_cons_abs$Region)"
"0","energy_cons_abs$Region <- gsub(""UKI"",""UK"", energy_cons_abs$Region)"
"0","energy_cons_abs$Region <- gsub(""POL"",""Poland"", energy_cons_abs$Region)"
"0","energy_cons_abs$Region <- gsub(""ESP"",""Spain and \nPortugal"", energy_cons_abs$Region)"
"0","energy_cons_abs$Region <- gsub(""BNL"",""Benelux"", energy_cons_abs$Region)"
"0","energy_cons_abs$Region <- gsub(""EUN"",""Northern EU"", energy_cons_abs$Region)"
"0","energy_cons_abs$Region <- gsub(""EUS"",""Central and \nSoutheastern EU"", energy_cons_abs$Region)"
"0","energy_cons_abs$Region <- gsub(""EU28"",""EU-28"", energy_cons_abs$Region)"
"0","energy_cons_abs$Region <- ordered(energy_cons_abs$Region, levels = c(""Germany"","
"0","                            ""France"","
"0","                            ""Italy"","
"0","                            ""UK"","
"0","                            ""Poland"","
"0","                            ""Spain and \nPortugal"","
"0","                            ""Benelux"","
"0","                            ""Northern EU"","
"0","                            ""Central and \nSoutheastern EU"","
"0","                            ""EU-28""))"
"0","# update scenario names and change order"
"0","energy_cons_abs[[5]] = toupper(energy_cons_abs[[5]])"
"0","energy_cons_abs$Scenario <- factor(energy_cons_abs$Scenario, levels = c(""BAU"","
"0","                                                                            ""CON"","
"0","                                                                            ""LAB"","
"0","                                                                            ""CAP"","
"0","                                                                            ""INV""))"
"0","energy_cons_abs$Value[is.na(energy_cons_abs$Region)] <- 0"
