"0","# Spread scenarios to be able to change them"
"0","energy_cons_diff <- spread(energy_cons_filter, key = ""Scenario"", value = ""Value"")"
"0","# Transform each scenario into the relative difference to reference scenario"
"0","energy_cons_diff <- energy_cons_diff %>% mutate(bau = (bau-ref)/ref)"
"0","energy_cons_diff <- energy_cons_diff %>% mutate(cAP = (cAP-ref)/ref)"
"0","energy_cons_diff <- energy_cons_diff %>% mutate(inv = (inv-ref)/ref)"
"0","energy_cons_diff <- energy_cons_diff %>% mutate(lab = (lab-ref)/ref)"
"0","energy_cons_diff <- energy_cons_diff %>% mutate(vat = (vat-ref)/ref)"
"0","# drop ref"
"0","energy_cons_diff <- subset(energy_cons_diff, select = -c(ref))"
"0","# gather scenarios"
"0","energy_cons_diff <- gather(energy_cons_diff, 'bau', 'cAP', 'inv', 'vat', 'lab', key = 'Scenario', value = 'Value')"
"0","energy_cons_diff <- energy_cons_diff %>%"
"0","  mutate(Scenario = str_replace(Scenario, ""vat"", ""con""))"
"0","energy_cons_diff$Region <- gsub(""DEU"",""Germany"", energy_cons_diff$Region)"
"0","energy_cons_diff$Region <- gsub(""FRA"",""France"", energy_cons_diff$Region)"
"0","energy_cons_diff$Region <- gsub(""ITA"",""Italy"", energy_cons_diff$Region)"
"0","energy_cons_diff$Region <- gsub(""UKI"",""UK"", energy_cons_diff$Region)"
"0","energy_cons_diff$Region <- gsub(""POL"",""Poland"", energy_cons_diff$Region)"
"0","energy_cons_diff$Region <- gsub(""ESP"",""Spain and \nPortugal"", energy_cons_diff$Region)"
"0","energy_cons_diff$Region <- gsub(""BNL"",""Benelux"", energy_cons_diff$Region)"
"0","energy_cons_diff$Region <- gsub(""EUN"",""Northern EU"", energy_cons_diff$Region)"
"0","energy_cons_diff$Region <- gsub(""EUS"",""Central and \nSoutheastern EU"", energy_cons_diff$Region)"
"0","energy_cons_diff$Region <- gsub(""EU28"",""EU-28"", energy_cons_diff$Region)"
"0","energy_cons_diff$Region <- ordered(energy_cons_diff$Region, levels = c(""Germany"","
"0","                            ""France"","
"0","                            ""Italy"","
"0","                            ""UK"","
"0","                            ""Poland"","
"0","                            ""Spain and \nPortugal"","
"0","                            ""Benelux"","
"0","                            ""Northern EU"","
"0","                            ""Central and \nSoutheastern EU"","
"0","                            ""EU-28""))"
"0","# update scenario names and change order"
"0","energy_cons_diff[[5]] = toupper(energy_cons_diff[[5]])"
"0","energy_cons_diff$Scenario <- factor(energy_cons_diff$Scenario, levels = c(""BAU"","
"0","                                                                            ""CON"","
"0","                                                                            ""LAB"","
"0","                                                                            ""CAP"","
"0","                                                                            ""INV""))"
"0","energy_cons_diff$Value[is.na(energy_cons_diff$Value)] <- 0"
